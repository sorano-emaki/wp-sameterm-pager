{"version":3,"file":"admin/admin.js","mappings":"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","sources":["webpack://wp-sameterm-pager/./src/admin/components/ApiCheck.js","webpack://wp-sameterm-pager/./src/admin/components/Navigation.js","webpack://wp-sameterm-pager/./src/admin/components/SaveConfirmation.js","webpack://wp-sameterm-pager/./src/admin/admin.scss?3afc","webpack://wp-sameterm-pager/external window \"ReactJSXRuntime\"","webpack://wp-sameterm-pager/external window [\"wp\",\"apiFetch\"]","webpack://wp-sameterm-pager/external window [\"wp\",\"components\"]","webpack://wp-sameterm-pager/external window [\"wp\",\"element\"]","webpack://wp-sameterm-pager/webpack/bootstrap","webpack://wp-sameterm-pager/webpack/runtime/compat get default export","webpack://wp-sameterm-pager/webpack/runtime/define property getters","webpack://wp-sameterm-pager/webpack/runtime/hasOwnProperty shorthand","webpack://wp-sameterm-pager/webpack/runtime/make namespace object","webpack://wp-sameterm-pager/./src/admin/admin.js"],"sourcesContent":["import { useState, useEffect } from '@wordpress/element';\r\nimport apiFetch from '@wordpress/api-fetch';\r\n\r\nexport const useApiCheck = () => {\r\n    const [isApiError, setIsApiError] = useState(false);\r\n\r\n    useEffect(() => {\r\n        apiFetch({ path: '/wp/v2/settings' })\r\n            .then(() => {\r\n                setIsApiError(false);\r\n            })\r\n            .catch(() => {\r\n                setIsApiError(true);\r\n            });\r\n    }, []);\r\n\r\n    return isApiError;\r\n};\r\n","import { useState, useEffect } from '@wordpress/element';\r\nconst PageNavigation = () => {\r\n    const [currentPage, setCurrentPage] = useState('');\r\n\r\n    useEffect(() => {\r\n        // 現在のページURLのクエリパラメータから現在のページを特定\r\n        const params = new URLSearchParams(window.location.search);\r\n        setCurrentPage(params.get('page'));\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"admin-sidebar\">\r\n            <h3>設定メニュー</h3>\r\n            <div className=\"smtrm-tab-navigation\">\r\n                <a\r\n                    href=\"admin.php?page=wp_sameterm_pager\"\r\n                    className={currentPage === 'wp_sameterm_pager' ? 'active' : 'inactive'}\r\n                >\r\n                    一般設定\r\n                </a>\r\n                <a\r\n                    href=\"admin.php?page=wp_sameterm_pager_additional\"\r\n                    className={currentPage === 'wp_sameterm_pager_additional' ? 'active' : 'inactive'}\r\n                >\r\n                    追加設定\r\n                </a>\r\n                <a\r\n                    href=\"admin.php?page=wp_sameterm_pager_help\"\r\n                    className={currentPage === 'wp_sameterm_pager_help' ? 'active' : 'inactive'}\r\n                >\r\n                    ヘルプ\r\n                </a>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PageNavigation;","import { \r\n    useEffect\r\n} from '@wordpress/element';\r\nexport const useSaveConfirmation = (hasChanges) => {\r\n    useEffect(() => {\r\n        const handleBeforeUnload = (event) => {\r\n            if (hasChanges) {\r\n                event.preventDefault();\r\n                event.returnValue = ''; // 確認ダイアログを表示\r\n            }\r\n        };\r\n        \r\n        window.addEventListener('beforeunload', handleBeforeUnload);\r\n        return () => {\r\n            window.removeEventListener('beforeunload', handleBeforeUnload);\r\n        };\r\n    }, [hasChanges]);\r\n\r\n    const confirmSave = () => {\r\n        return window.confirm('本当に設定を保存しますか？');\r\n    };\r\n\r\n    return confirmSave;\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"ReactJSXRuntime\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// 設定画面用スタイル\r\nimport './admin.scss';\r\n\r\nimport { \r\n    render,\r\n    useState,\r\n    useEffect\r\n} from '@wordpress/element';\r\nimport {\r\n    ToggleControl,\r\n    TextControl,\r\n    Button,\r\n    Notice,\r\n    Spinner\r\n} from '@wordpress/components';\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport PageNavigation from './components/Navigation';  // 共通ナビゲーションのインポート\r\nimport { useSaveConfirmation } from './components/SaveConfirmation';\r\nimport { useApiCheck } from './components/ApiCheck';\r\n\r\nconst Admin = () => {\r\n\r\n    // ローディング状態、メッセージ状態の追加\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [statusMessage, setStatusMessage] = useState(null);\r\n    const [hasChanges, setHasChanges] = useState(false);    // 変更があったかどうかのフラグ\r\n    const isApiError = useApiCheck();\r\n    const confirmSave = useSaveConfirmation(hasChanges);\r\n    const [showPagerTop, setShowPagerTop] = useState(Boolean(smtrmPagerAdmin?.top));\r\n    const [showPagerBtm, setShowPagerBtm] = useState(Boolean(smtrmPagerAdmin?.bottom));\r\n\r\n    const onClick = async () => {\r\n    \r\n        if (!confirmSave()) {\r\n            return;\r\n        }\r\n    \r\n        setIsSaving(true);\r\n        setStatusMessage(null);\r\n    \r\n        try {\r\n            const response = await apiFetch({\r\n                path: '/wp/v2/settings',\r\n                method: 'POST',\r\n                data: {\r\n                    'smtrm_pager_top': showPagerTop,\r\n                    'smtrm_pager_bottom': showPagerBtm,                },\r\n                headers: {\r\n                    'X-WP-Nonce': smtrmPagerAdmin.nonce // nonceを使用\r\n                }\r\n            });\r\n    \r\n            setStatusMessage({ type: 'success', text: '設定が保存されました！' });\r\n            setHasChanges(false);  // 変更フラグをリセット\r\n        } catch (error) {\r\n            let errorMessage = '設定の保存に失敗しました。';\r\n            // エラーオブジェクトの中身をデバッグ用に表示\r\n            const errorDetails = JSON.stringify(error, null, 2);  // エラーオブジェクト全体を文字列化\r\n            errorMessage += ': '+ JSON.stringify(error.message);  // エラーメッセージに詳細を追加\r\n            // エラーメッセージをセット\r\n            setStatusMessage({ type: 'error', text: errorMessage });\r\n            console.error('API Save Error:', error);  // コンソールにエラーログを出力\r\n            console.log(errorDetails);\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"smtrm-admin-wrapper\">\r\n            <div className=\"admin-content\">\r\n                <h1>Same Term Pagerプラグイン 一般設定ページ</h1>\r\n                {/* 保存成功/失敗メッセージの表示 */}\r\n                {statusMessage && (\r\n                    <Notice\r\n                        status={statusMessage.type}\r\n                        onRemove={() => setStatusMessage(null)}\r\n                    >\r\n                        {statusMessage.text}\r\n                    </Notice>\r\n                )}\r\n                {/* REST APIが無効な場合のエラーメッセージを設定画面の上部に表示 */}\r\n                {isApiError && (\r\n                    <Notice status=\"error\" isDismissible={false}>\r\n                        <p>REST APIが無効です。WordPress REST APIを有効にしてください。</p>\r\n                    </Notice>\r\n                )}\r\n                <h2>一般設定</h2>\r\n                <div className=\"setting-wrapper\">\r\n                    <div className=\"setting-box\">\r\n                        <h3>投稿上下のページャー</h3>\r\n                        <ToggleControl\r\n                            label=\"投稿上に表示する\"\r\n                            checked={showPagerTop}\r\n                            onChange={() => {\r\n                                setShowPagerTop(!showPagerTop);\r\n                                setHasChanges(true);  // 変更があったことを通知\r\n                            }}\r\n                            disabled={isSaving || isApiError}\r\n                        />\r\n                        <ToggleControl\r\n                            label=\"投稿下に表示する\"\r\n                            checked={showPagerBtm}\r\n                            onChange={() => {\r\n                                setShowPagerBtm(!showPagerBtm);\r\n                                setHasChanges(true);  // 変更があったことを通知\r\n                            }}\r\n                            disabled={isSaving || isApiError}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <Button\r\n                    isPrimary\r\n                    onClick={onClick}\r\n                    disabled={isSaving || isApiError }\r\n                >\r\n                    {isSaving ? (\r\n                        <>\r\n                            <Spinner /> 保存中…\r\n                        </>\r\n                    ) : (\r\n                        '保存'\r\n                    )}\r\n                </Button>\r\n            </div>\r\n            {/* 右カラム（ナビゲーション） */}\r\n            <PageNavigation />\r\n        </div>\r\n    );\r\n};\r\n\r\n// AdminコンポーネントをルートDOMにレンダリング\r\nrender(\r\n    <Admin />,\r\n    document.getElementById('smtrm-pager-admin')\r\n);\r\n"],"names":["useState","useEffect","apiFetch","useApiCheck","isApiError","setIsApiError","path","then","catch","jsx","_jsx","jsxs","_jsxs","PageNavigation","currentPage","setCurrentPage","params","URLSearchParams","window","location","search","get","className","children","href","useSaveConfirmation","hasChanges","handleBeforeUnload","event","preventDefault","returnValue","addEventListener","removeEventListener","confirmSave","confirm","render","ToggleControl","TextControl","Button","Notice","Spinner","Fragment","_Fragment","Admin","isSaving","setIsSaving","statusMessage","setStatusMessage","setHasChanges","showPagerTop","setShowPagerTop","Boolean","smtrmPagerAdmin","top","showPagerBtm","setShowPagerBtm","bottom","onClick","response","method","data","headers","nonce","type","text","error","errorMessage","errorDetails","JSON","stringify","message","console","log","status","onRemove","isDismissible","label","checked","onChange","disabled","isPrimary","document","getElementById"],"sourceRoot":""}