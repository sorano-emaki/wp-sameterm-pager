(()=>{"use strict";var e={470:(e,t,r)=>{var a=r(795);t.H=a.createRoot,a.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const a=window.React;var s=r(470);const n=window.wp.element,o=window.wp.components,i=window.wp.i18n,l=window.wp.apiFetch;var m=r.n(l);const p=window.ReactJSXRuntime,c=()=>{const[e,t]=(0,n.useState)("");return(0,n.useEffect)((()=>{const e=new URLSearchParams(window.location.search);t(e.get("page"))}),[]),(0,p.jsxs)("div",{className:"admin-sidebar",children:[(0,p.jsx)("h3",{children:(0,i.__)("Settings Menu","wp-sameterm-pager")})," ",(0,p.jsxs)("div",{className:"smtrm-tab-navigation",children:[(0,p.jsxs)("a",{href:"admin.php?page=wp_sameterm_pager",className:"wp_sameterm_pager"===e?"active":"inactive",children:[(0,i.__)("General Settings","wp-sameterm-pager")," "]}),(0,p.jsxs)("a",{href:"admin.php?page=wp_sameterm_pager_advanced",className:"wp_sameterm_pager_advanced"===e?"active":"inactive",children:[(0,i.__)("Advanced Settings","wp-sameterm-pager")," "]}),(0,p.jsxs)("a",{href:"admin.php?page=wp_sameterm_pager_help",className:"wp_sameterm_pager_help"===e?"active":"inactive",children:[(0,i.__)("Help","wp-sameterm-pager")," "]})]})]})},d=(0,a.createContext)(null),h={didCatch:!1,error:null};class g extends a.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=h}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,r,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];null===(t=(r=this.props).onReset)||void 0===t||t.call(r,{args:s,reason:"imperative-api"}),this.setState(h)}}componentDidCatch(e,t){var r,a;null===(r=(a=this.props).onError)||void 0===r||r.call(a,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:a}=this.props;var s,n;r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,r)=>!Object.is(e,t[r])))}(e.resetKeys,a)&&(null===(s=(n=this.props).onReset)||void 0===s||s.call(n,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(h))}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:s}=this.props,{didCatch:n,error:o}=this.state;let i=e;if(n){const e={error:o,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)i=t(e);else if(r)i=(0,a.createElement)(r,e);else{if(void 0===s)throw o;i=s}}return(0,a.createElement)(d.Provider,{value:{didCatch:n,error:o,resetErrorBoundary:this.resetErrorBoundary}},i)}}const _=function({error:e}){return(0,p.jsx)("div",{className:"components-notice is-error",children:(0,p.jsxs)("div",{className:"components-notice__content",children:[(0,p.jsx)("h3",{children:(0,i.__)("An error occurred while loading the page.","wp-sameterm-pager")}),(0,p.jsx)("p",{children:e.message}),(0,p.jsx)("p",{children:(0,i.__)("Please use the legacy settings page instead.","wp-sameterm-pager")}),(0,p.jsx)("a",{href:"admin.php?page=wp_sameterm_pager&legacy=1",style:{color:"#0073aa"},children:(0,i.__)("Go to the legacy settings page","wp-sameterm-pager")})]})})},u=()=>{const[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),[s,l]=(0,n.useState)(!1),d=(()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{m()({path:"/smtrm/v1/settings"}).then((()=>{t(!1)})).catch((()=>{t(!0)}))}),[]),e})(),h=(e=>((0,n.useEffect)((()=>{const t=t=>{e&&(t.preventDefault(),t.returnValue="")};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e]),()=>window.confirm((0,i.__)("Do you really want to save the settings?","wp-sameterm-pager"))))(s),[u,w]=(0,n.useState)(Number(smtrmPagerAdmin?.top)),[v,x]=(0,n.useState)(Number(smtrmPagerAdmin?.bottom)),[j,f]=(0,n.useState)(smtrmPagerAdmin?.latestText||""),[y,b]=(0,n.useState)(smtrmPagerAdmin?.oldestText||"");return(0,p.jsx)(g,{FallbackComponent:_,children:(0,p.jsxs)("div",{className:"smtrm-admin-wrapper",children:[(0,p.jsxs)("div",{className:"admin-content",children:[(0,p.jsx)("h1",{children:(0,i.__)("Same Term Pager Plugin General Settings Page","wp-sameterm-pager")}),r&&(0,p.jsx)(o.Notice,{status:r.type,onRemove:()=>a(null),children:r.text}),d&&(0,p.jsxs)(o.Notice,{status:"error",isDismissible:!1,children:[(0,p.jsx)("p",{children:(0,i.__)("REST API is disabled. Please enable WordPress REST API.","wp-sameterm-pager")}),(0,p.jsxs)("a",{href:"admin.php?page=wp_sameterm_pager&legacy=1",children:["  ",(0,i.__)("Use the Legacy Settings","wp-sameterm-pager")]})]}),(0,p.jsx)("h2",{children:(0,i.__)("General Settings","wp-sameterm-pager")}),(0,p.jsxs)("div",{className:"setting-wrapper",children:[(0,p.jsxs)("div",{className:"setting-box",children:[(0,p.jsx)("h3",{children:(0,i.__)("Pager Above and Below Posts","wp-sameterm-pager")}),(0,p.jsx)(o.ToggleControl,{label:(0,i.__)("Display pager above the post","wp-sameterm-pager"),checked:u,onChange:()=>{w(!u),l(!0)},disabled:e||d}),(0,p.jsx)(o.ToggleControl,{label:(0,i.__)("Display pager below the post","wp-sameterm-pager"),checked:v,onChange:()=>{x(!v),l(!0)},disabled:e||d})]}),(0,p.jsxs)("div",{className:"setting-box",children:[(0,p.jsx)("h3",{children:(0,i.__)("Custom Text for Pager","wp-sameterm-pager")}),(0,p.jsx)(o.TextControl,{label:(0,i.__)('Text for "Read the oldest post"',"wp-sameterm-pager"),value:y,onChange:e=>{b(e),l(!0)}}),(0,p.jsx)(o.TextControl,{label:(0,i.__)('Text for "Read the latest post"',"wp-sameterm-pager"),value:j,onChange:e=>{f(e),l(!0)}}),(0,p.jsx)("small",{children:(0,i.__)("You can use HTML tags such as <span>.","wp-sameterm-pager")}),(0,p.jsx)("small",{children:(0,i.__)("Unavailable HTML tags are automatically removed.","wp-sameterm-pager")})]})]}),(0,p.jsx)(o.Button,{isPrimary:!0,onClick:async()=>{if(!h())return;t(!0),a(null);const e={smtrm_pager_top:u?1:0,smtrm_pager_bottom:v?1:0,smtrm_latest_post_text:null!=j?j:"",smtrm_oldest_post_text:null!=y?y:""};try{await m()({path:"/smtrm/v1/settings",method:"POST",data:e,headers:{"X-WP-Nonce":smtrmPagerAdmin.nonce}}),a({type:"success",text:(0,i.__)("Settings have been saved!","wp-sameterm-pager")}),l(!1)}catch(e){let t=(0,i.__)("Failed to save settings.","wp-sameterm-pager");const r=JSON.stringify(e,null,2);t+=": "+JSON.stringify(e.message),a({type:"error",text:t}),console.error("API Save Error:",e),console.log(r)}finally{t(!1)}},disabled:e||d,className:"save-button",children:e?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Spinner,{})," ",(0,i.__)("Savingâ€¦","wp-sameterm-pager")]}):(0,i.__)("Save","wp-sameterm-pager")})]}),(0,p.jsx)(c,{})]})})};(0,s.H)(document.getElementById("smtrm-pager-admin")).render((0,p.jsx)(u,{}))})();