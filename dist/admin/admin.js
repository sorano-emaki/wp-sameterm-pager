(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var s in t)e.o(t,s)&&!e.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:t[s]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.wp.element,t=window.wp.components,s=window.wp.i18n,r=window.wp.apiFetch;var n=e.n(r);const m=window.ReactJSXRuntime,i=()=>{const[e,t]=(0,a.useState)("");return(0,a.useEffect)((()=>{const e=new URLSearchParams(window.location.search);t(e.get("page"))}),[]),(0,m.jsxs)("div",{className:"admin-sidebar",children:[(0,m.jsx)("h3",{children:(0,s.__)("Settings Menu","wp-sameterm-pager")})," ",(0,m.jsxs)("div",{className:"smtrm-tab-navigation",children:[(0,m.jsxs)("a",{href:"admin.php?page=wp_sameterm_pager",className:"wp_sameterm_pager"===e?"active":"inactive",children:[(0,s.__)("General Settings","wp-sameterm-pager")," "]}),(0,m.jsxs)("a",{href:"admin.php?page=wp_sameterm_pager_advanced",className:"wp_sameterm_pager_advanced"===e?"active":"inactive",children:[(0,s.__)("Advanced Settings","wp-sameterm-pager")," "]}),(0,m.jsxs)("a",{href:"admin.php?page=wp_sameterm_pager_help",className:"wp_sameterm_pager_help"===e?"active":"inactive",children:[(0,s.__)("Help","wp-sameterm-pager")," "]})]})]})},l=()=>{const[e,r]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),[p,d]=(0,a.useState)(!1),c=(()=>{const[e,t]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{n()({path:"/wp/v2/settings"}).then((()=>{t(!1)})).catch((()=>{t(!0)}))}),[]),e})(),g=(e=>((0,a.useEffect)((()=>{const a=a=>{e&&(a.preventDefault(),a.returnValue="")};return window.addEventListener("beforeunload",a),()=>{window.removeEventListener("beforeunload",a)}}),[e]),()=>window.confirm((0,s.__)("Do you really want to save the settings?","wp-sameterm-pager"))))(p),[_,h]=(0,a.useState)(Boolean(smtrmPagerAdmin?.top)),[w,u]=(0,a.useState)(Boolean(smtrmPagerAdmin?.bottom)),[x,v]=(0,a.useState)(smtrmPagerAdmin?.latestText||""),[j,b]=(0,a.useState)(smtrmPagerAdmin?.oldestText||"");return(0,m.jsxs)("div",{className:"smtrm-admin-wrapper",children:[(0,m.jsxs)("div",{className:"admin-content",children:[(0,m.jsx)("h1",{children:(0,s.__)("Same Term Pager Plugin General Settings Page","wp-sameterm-pager")}),l&&(0,m.jsx)(t.Notice,{status:l.type,onRemove:()=>o(null),children:l.text}),c&&(0,m.jsx)(t.Notice,{status:"error",isDismissible:!1,children:(0,m.jsx)("p",{children:(0,s.__)("REST API is disabled. Please enable WordPress REST API.","wp-sameterm-pager")})}),(0,m.jsx)("h2",{children:(0,s.__)("General Settings","wp-sameterm-pager")}),(0,m.jsxs)("div",{className:"setting-wrapper",children:[(0,m.jsxs)("div",{className:"setting-box",children:[(0,m.jsx)("h3",{children:(0,s.__)("Pager Above and Below Posts","wp-sameterm-pager")}),(0,m.jsx)(t.ToggleControl,{label:(0,s.__)("Display pager above the post","wp-sameterm-pager"),checked:_,onChange:()=>{h(!_),d(!0)},disabled:e||c}),(0,m.jsx)(t.ToggleControl,{label:(0,s.__)("Display pager below the post","wp-sameterm-pager"),checked:w,onChange:()=>{u(!w),d(!0)},disabled:e||c})]}),(0,m.jsxs)("div",{className:"setting-box",children:[(0,m.jsx)("h3",{children:(0,s.__)("Custom Text for Pager","wp-sameterm-pager")}),(0,m.jsx)(t.TextControl,{label:(0,s.__)('Text for "Read the oldest post"',"wp-sameterm-pager"),value:j,onChange:e=>{b(e),d(!0)}}),(0,m.jsx)(t.TextControl,{label:(0,s.__)('Text for "Read the latest post"',"wp-sameterm-pager"),value:x,onChange:e=>{v(e),d(!0)}}),(0,m.jsx)("small",{children:(0,s.__)("You can use HTML tags such as <span>.","wp-sameterm-pager")}),(0,m.jsx)("small",{children:(0,s.__)("Unavailable HTML tags are automatically removed.","wp-sameterm-pager")})]})]}),(0,m.jsx)(t.Button,{isPrimary:!0,onClick:async()=>{if(g()){r(!0),o(null);try{await n()({path:"/wp/v2/settings",method:"POST",data:{smtrm_pager_top:_,smtrm_pager_bottom:w,smtrm_latest_post_text:x,smtrm_oldest_post_text:j},headers:{"X-WP-Nonce":smtrmPagerAdmin.nonce}}),o({type:"success",text:(0,s.__)("Settings have been saved!","wp-sameterm-pager")}),d(!1)}catch(e){let a=(0,s.__)("Failed to save settings.","wp-sameterm-pager");const t=JSON.stringify(e,null,2);a+=": "+JSON.stringify(e.message),o({type:"error",text:a}),console.error("API Save Error:",e),console.log(t)}finally{r(!1)}}},disabled:e||c,className:"save-button",children:e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(t.Spinner,{})," ",(0,s.__)("Saving...","wp-sameterm-pager")]}):(0,s.__)("Save","wp-sameterm-pager")})]}),(0,m.jsx)(i,{})]})};(0,a.render)((0,m.jsx)(l,{}),document.getElementById("smtrm-pager-admin"))})();