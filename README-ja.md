# WP Same Term Pager – WordPress用・カテゴリーで絞り込める投稿ページ用のページャープラグイン
WP Same Term Pagerは、同じカテゴリー、タグ、カスタムタクソノミーで絞り込んで前後の投稿に移動できるWordPressの投稿ページ専用ページャープラグインです。

## 最新バージョンのダウンロード
開発者以外の方は以下のページからwp-sameterm-pager-{version}.zipをダウンロードしてご利用いただけます。 {version}部分にはバージョン表記が入ります。
[Download from GitHub](https://github.com/sorano-emaki/wp-sameterm-pager/releases/latest)
開発者の方は「develop」ブランチをクローンしてご利用いただけます。

## Same Term Pagerとは？
同じターム（カテゴリーやタグ、カスタムタクソノミー内の各項目）で絞り込んだ投稿ページ用ページネーションを表示できるプラグインです。

投稿に複数のタームが登録されていても、同じタームで絞り込んだ状態で、投稿日時が前後の投稿ページへ移動することができます。

前後の投稿ページへのリンクには、方向アイコン、投稿記事のアイキャッチ画像のサムネイル（画像がない場合は「No Image」表示）とタイトルが一行で含まれています。わかりやすいナビゲーションで前後の記事に移動できます。

「最初」リンクで投稿日時が一番古い記事へ、「最後」リンクで投稿日時が一番新しい記事へ、同じタームで絞り込んだ状態で移動することができます。

移動元のアーカイブページ（カテゴリ・タグ・カスタムタクソノミー）の種類を元にタームの絞り込みフィルター（smtrm_filter）が有効になります。フロントページや日時別アーカイブ、著者アーカイブ、検索結果ページからの移動や、外部サイトからの移動等では絞り込みフィルターが有効になりません。

絞り込みフィルターは「解除」ボタンでいつでも解除することができます。

絞り込みフィルターが解除された状態では、投稿日時の前後記事とすべての記事の最初・最後へ移動できます。

### WordPressにおける「ターム」とは？
投稿を分類（タクソノミー）した項目（ターム）のことです。

例えば、WordPressに最初から用意されているタクソノミーはカテゴリーとタグですが、カテゴリーやタグという分類（タクソノミー）に所属する項目一つ一つがターム（Term）と呼ばれます。

### ページャーとは？
投稿のページ送り機能です。このプラグインで使用しているページャーという用語はページネーションと同じ意味です。

サイト訪問者が目的の記事を捜しやすいように、投稿ページでは次の記事へ・前の記事へと移動するページャーが表示されることが多いです。

アーカイブページでは「前へ」と「ページ番号」と「次へ」のような形式で表示されることが多いです。

Same Term Pagerはターム絞り込み機能付き投稿ページ向けのページャーを提供しています。


## システム要件
- WordPress Version:5.2以上
- PHP Version:7.3以上

## 開発環境

### ツール
- **WordPress**: 5.2以上 （バージョン 5.2 から 6.7.1 でテスト済み）
- **PHP**: 7.3以上
- **Database**: MySQL 5.7
- **Node.js**: 20.16.x
- **yarn**: 1.22.x

### 主要パッケージ
- **@wordpress/scripts**: ビルドスクリプトとアセット管理用
- **react** / **react-dom**: Reactベースの管理パネル

### コードのチェックと成型
- **PHP-CS-Fixer**: includesディレクトリ内のすべてのPHPファイルに適用されます

### その他
- **GitHub**: バージョン管理とリポジトリホスティング
- **VSCode**: 主に使用するコードエディター
- **WSL (Ubuntu)**: コマンドライン操作に使用

### 翻訳

- **翻訳ファイル**: 「.pot」、「.mo」、「.po」、 JSON 翻訳ファイルは、languagesディレクトリにあります。

プラグイン内の表記は英語がデフォルトになっています。

日本語環境は既に翻訳ファイルが準備されていますのでそのままご利用いただけます。

多言語化にご協力いただける方は開発者までご連絡ください。Poedit等で翻訳のみご協力いただければ下記の操作手順の部分はこちらで対応いたします。

- **使用ツール**:
  - **WordPress CLI**:
    - 「.pot」ファイルを生成するコマンド  
      `wp i18n make-pot . languages/wp-sameterm-pager.pot --exclude=src`
    - 「.po」ファイルから JSON ファイルを生成するコマンド 
      `wp i18n make-json ./languages/ --no-purge`
        - このコマンドを実行すると、React コンポーネントで使用されるような JavaScript ベースの翻訳に必要な JSON ファイルが生成されます。
- **翻訳を更新する手順**:
  1. WordPress CLI がインストールされ、php-mbstring拡張機能が有効になっていることを確認します。
  2. 「.pot」ファイルを生成・更新するには、プロジェクトのルート ディレクトリで「make-pot」コマンドを実行します。
  3. 翻訳エディタ (Poedit や Loco Translate など) を使用して「.po」ファイルを編集し、「.mo」ファイルを更新します。
  4. 更新された「.po」ファイルを、「make-json」コマンドを実行して JavaScript ベースのコンポーネントで使用するための JSON ファイルに変換します。
- **サポートされている言語**:
  - 日本語 (`ja`)
  
- **Important Notes**:
  - --no-purgeオプションにより​​、既存の JSON ファイルが削除されず、変更部分のみ更新できるようになります。
  - 生成された JSON ファイルを「wp_set_script_translations」を利用してスクリプトに正常に読み込んでください。

# 免責事項
このプラグインはベータ版として提供されており、仕様は予告なく変更されることがあります。このプラグインの使用によって生じたいかなる損害や問題についても、開発者は一切責任を負いません。

プラグインの機能性を高めるために努力はしていますが、バグや意図しない動作が残っている可能性があります。本番環境に導入する前に、ステージング環境または開発環境でプラグインをテストすることをお勧めします。

このプラグインを使用すると、これらの条件に同意したものとみなされます。問題が発生した場合は、サポート ページまたは GitHub リポジトリから報告してください。

# 開発者
空の絵巻

# 開発者のサイト
https://shokizerokara.com/

# ライセンス
GPLv2
